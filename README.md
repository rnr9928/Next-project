
# Gurello

## ğŸ–¥ï¸ Project Page  

<li><a href = "https://gurelllo.vercel.app/">http://15.164.221.206</a></li>
<br><br>


## ğŸ§¾ Project Description

Nextjsì™€ TypeScriptë¡œ ë§Œë“  í˜‘ì—… ì›¹í˜ì´ì§€


<br><br>



## ğŸ›  Tech Stack

### Front: Next.js , TypeScript , tailwind  
### Back: Next-auth , liveblock

<br><br>

## ğŸ¨ Preview

![í™”ë©´ ìº¡ì²˜ 2024-03-20 001156](https://github.com/rnr9928/Next-project/assets/97073355/5b6736c3-f232-4fc9-a6cd-7d31a489932f)  
![í™”ë©´ ìº¡ì²˜ 2024-03-20 001530](https://github.com/rnr9928/Next-project/assets/97073355/a10e495d-014b-406e-9ad4-668098702a88)

<br><br>

---

## next-authë¡œ ê°„í¸í•˜ê²Œ Oauth ì¸ì¦í•˜ê¸°

```
npm install next-auth
```

/app/api/auth/[...nextauth]/route.ts ê²½ë¡œ íŒŒì¼ ìƒì„±  


![í™”ë©´ ìº¡ì²˜ 2024-03-21 145454](https://github.com/rnr9928/Next-project/assets/97073355/a0ac7ce0-b310-4db6-bdc7-fd776739de00)  

next-auth í˜ì´ì§€   -> Providers -> Google 
<br><br>

![í™”ë©´ ìº¡ì²˜ 2024-03-21 150056](https://github.com/rnr9928/Next-project/assets/97073355/9af145e5-638b-46ae-96f0-c350f4d89be2)


êµ¬ê¸€ í´ë¼ìš°ë“œì— ë“¤ì–´ê°€ì„œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œ ë‹¤ìŒ 
ì‚¬ìš©í•˜ê³  ìˆëŠ” ì£¼ì†Œë¥¼ ì¶”ê°€  
<br><br>

![í™”ë©´ ìº¡ì²˜ 2024-03-21 150632](https://github.com/rnr9928/Next-project/assets/97073355/cf19494a-ed6a-48cc-be1e-18cd9a707224)

ì•„ê¹Œ ìƒì„±í•œ ê²½ë¡œ íŒŒì¼ì—  í´ë¼ì´ì–¸íŠ¸ idì™€ passwordë¥¼ .envíŒŒì¼ì— ë„£ê³ 
ì ìš©  
<br><br>

![í™”ë©´ ìº¡ì²˜ 2024-03-21 151152](https://github.com/rnr9928/Next-project/assets/97073355/c6f8a713-2e40-46ac-91d1-8136c833efe9)  
ë¡œê·¸ì¸ í˜ì´ì§€ ë§Œë“¤ì–´ì„œ signIn í•¨ìˆ˜ë¥¼ importí•˜ë©´ ì™„ì„±
<br><br><br><br>


---
## liveblocks ë¼ì´ë¸ŒëŸ¬ë¦¬

![logo-liveblocks-organization-schema](https://github.com/rnr9928/Next-project/assets/97073355/053bdc44-8d66-4f36-9b8f-4530c48bacde)  

liveblocksì€ ì‹¤ì‹œê°„ í˜‘ì—… ê¸°ëŠ¥ë“¤ì„ ì¤‘ì ì— ë‘” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤  

![í™”ë©´ ìº¡ì²˜ 2024-03-21 210451](https://github.com/rnr9928/Next-project/assets/97073355/8d1bfcfa-4555-424a-bba5-e381d3715b72)  
getServerSessioní•¨ìˆ˜ë¡œ ì‚¬ìš©ìì˜ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤  
êµ¬ê¸€ì— ì¸ì¦ëœ ë©”ì¼ì´ ìˆì„ì‹œ unqid.time()ë¥¼ ì´ìš©í•´ í˜„ì¬ ì‹œê° ê¸°ì¤€ìœ¼ë¡œ ê³ ìœ í•œ ë°© idë¥¼ ìƒì„±í•˜ê³ 
ì—†ì„ ê²½ìš° falseë¡œ ë¦¬í„´í–ˆìŠµë‹ˆë‹¤  

[ getServerSession í•¨ìˆ˜ëŠ” NextAuthì—ì„œ ì œê³µë˜ëŠ” í•¨ìˆ˜ì¤‘ í•˜ë‚˜ë¡œ ì„œë²„ì¸¡ì—ì„œ ì„¸ì…˜ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì“°ì…ë‹ˆë‹¤ ]  

![í™”ë©´ ìº¡ì²˜ 2024-03-21 211025](https://github.com/rnr9928/Next-project/assets/97073355/99de92b6-1634-4701-adbb-4c5b672c6485)  
liveblock í”„ë¡œì íŠ¸ í˜ì´ì§€ì—ì„œ ìœ ì € ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤


## ì´ˆëŒ€í•˜ê¸°  
![í™”ë©´ ìº¡ì²˜ 2024-03-26 223129](https://github.com/rnr9928/Next-project/assets/97073355/6efc0cd6-5ba3-4c07-bbb8-e782b5148e2a)  

ì´ë©”ì¼ì„ ì¶”ê°€í•´ì„œ ìì‹ ì˜ ì‘ì—…ë¬¼ì— ì´ˆëŒ€í• ìˆ˜ ìˆìŠµë‹ˆë‹¤  
```
export default function NewBoardSetting({boardId}:{boardId:string}){
    const router = useRouter()
    const inputRef = useRef<HTMLInputElement>(null)
   async function actionEamil(formData: FormData){
        const email = formData.get('email')?.toString() || ''
        await AddEmail(boardId,email)
        if(inputRef.current){
            inputRef.current.value =''
        }
        router.refresh()
    }
```
inputì—ì„œ ì…ë ¥ëœ ê°’ì´ ë“¤ì–´ê°ˆ ì˜ˆì •ì´ë¯€ë¡œ useRef() íƒ€ì…ì— ì œë„ˆë¦­ìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤  
ì´ë©”ì¼ì€ FormDataì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ emailí•„ë“œë¥¼ ê°€ì ¸ì™€ ë¬¸ìì—´ë¡œ ë³€í™˜ ì—†ìœ¼ë©´ ë¹ˆë¬¸ìì—´  
```
export async function AddEmail(boardId:string, email:string){
    const room = await liveblocks.getRoom(boardId)
    const usersAccesses = room.usersAccesses
    usersAccesses[email] = ['room:write']
    await liveblocks.updateRoom(boardId,{usersAccesses})
    return true
}
```
liveblocks.getRoom(boardId)ë¥¼ í˜¸ì¶œí•˜ì—¬ boardId ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  roomì— í• ë‹¹  

usersAccesses[email] = ['room:write'] ëŠ” liveblocksì˜ ê¸°ëŠ¥ì…ë‹ˆë‹¤ ì´ˆëŒ€ëœ ì´ë©”ì¼ì— ì“°ê¸° ê¶Œí•œì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤

